<!DOCTYPE html>
<html lang="zh_cn">
<head>
        <meta charset="utf-8" />
        <meta name="generator" content="Pelican" />
        <title>funcman's blog - funcman</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">funcman's blog</a></h1>
                <nav><ul>
                    <li><a href="/category/gamedev.html">gamedev</a></li>
                    <li><a href="/category/mathematics.html">mathematics</a></li>
                    <li><a href="/category/others.html">others</a></li>
                    <li><a href="/category/programming.html">programming</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/another_way_to_use_jekyll_on_windows_10.html">另一种在Windows10下使用Jekyll的方法</a></h1>
<footer class="post-info">
        <abbr class="published" title="2019-03-31T08:37:45+08:00">
                Published: 周日 31 三月 2019
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/funcman.html">funcman</a>
        </address>
<p>In <a href="/category/others.html">others</a>.</p>
<p>tags: <a href="/tag/jekyll.html">jekyll</a> <a href="/tag/ruby.html">Ruby</a> <a href="/tag/bian-cheng-huan-jing.html">编程环境</a> </p>
</footer><!-- /.post-info --><p>最近准备继续记博客，需要安装Jekyll环境。</p>
<p>手头既有Mac也有PC，考虑到上班期间带的是PC，所以还是要在Windows下配置一个Jekyll环境。</p>
<p>按照Jekyll官网的方法，是去安装RubyInstaller。但是，RubyInstaller本身是基于MSYS2的，我的PC已经装了MSYS2，不想再多搞一套，于是决定基于MSYS2安装Ruby和Jekyll。</p>
<p>MSYS2类似Cygwin（其实就是一个Cygwin分支），可以让用户在Windows下使用UNIX环境的套件。这里先介绍一下相关概念：</p>
<ul>
<li>
<p>Pacman是一套流行于Arch Linux下的软件包管理软件。</p>
</li>
<li>
<p>MinGW是一套在Windows使用的GNU工具链，MinGW-w64是新一代MinGW，同时支持32位和64位。</p>
</li>
<li>
<p>MSYS是为帮助MinGW在Windows下使用，随MinGW提供的一套基本的POSIX操作环境。它是基于较旧的Cygwin项目创建的一个分支。MSYS2和MSYS并不是同一个项目的不同版本，它们各为独立项目。</p>
</li>
</ul>
<p>MSYS2集成了Pacman和MinGW-w64。</p>
<p>我们在中国使用MSYS2，最好设置一下国内的镜像，网上的文章基本都是让用<a href="https://lug.ustc.edu.cn/wiki/mirrors/help/msys2">中科大的镜像</a>，但目前他们的东西有点问题，只好改用<a href="https://mirrors.tuna.tsinghua.edu.cn/help/msys2">清华的镜像</a>。可惜了，实际上中科大离我很近。</p>
<p>按照页面上的说明设置好镜像，并执行：</p>
<div class="highlight"><pre><span></span><code>pacman -Syu
</code></pre></div>

<p>在最后提示关闭MSYS2时，点窗口的X进行关闭，再去MSYS2安装目录里运行一下autorebase.bat。然后打开MSYS2，执行一下更新：</p>
<div class="highlight"><pre><span></span><code>pacman -Su
</code></pre></div>

<p>之后就安装一系列软件，我这里是：</p>
<div class="highlight"><pre><span></span><code><span class="n">pacman</span> <span class="o">-</span><span class="n">S</span> <span class="n">vim</span> <span class="n">git</span> <span class="n">base</span><span class="o">-</span><span class="n">devel</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">toolchain</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">ruby</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">ruby</span><span class="o">-</span><span class="n">native</span><span class="o">-</span><span class="n">package</span><span class="o">-</span><span class="n">installer</span>
</code></pre></div>

<p>之所以是使用mingw64/mingw-w64-x86_64-ruby，而不是msys/ruby，是因为我先用它试了一番，在Gem安装Jekyll时总是有个库编不过去。我没有深究下去，先这么着吧，以后有空再找找解决方法。</p>
<p>安装了这个版本的Ruby之后，需要将<a href="https://github.com/msys2/msys2/wiki/MSYS2-introduction#subsystems">shell type</a>设为mingw64进入MSYS2环境，也就是从“MSYS2 MinGW 64-bit”而不是“MSYS2 MSYS”进。前者会把/mingw64/bin加入到PATH里，而此版本Ruby安装在/mingw64/bin中。</p>
<p>然后，我用Gem安装Bundler和Jekyll：</p>
<div class="highlight"><pre><span></span><code>gem install bundler jekyll
</code></pre></div>

<p>我已经有个很久没写过的旧博客，需要升级一下，所以进入博客的目录，执行了一下：</p>
<div class="highlight"><pre><span></span><code>bundle update
</code></pre></div>

<p>据说升级Gem是一件很折腾人的事情，Ruby程序员往往一次升级单个Gem，一次性bundle update，容易出问题。我也是反复在bundle install和bundle update之间折腾，才搞定了这件事。具体可以查一下<a href="https://bing.com/search?q=bundle%20install%20bundle%20update%20%E5%8C%BA%E5%88%AB">bundle install和bundle update之间的区别</a>。</p>
<p>升级完成之后，就可以继续<a href="https://jekyllrb.com/docs/step-by-step/01-setup">用Jekyll写博客</a>了。</p>
<p>PS：</p>
<p>我为了复习怎么用Jekyll，粗略的看了一下<a href="https://jekyllrb.com/docs/step-by-step/01-setup">Jekyll Step by Step Tutorial</a>。它在第一步里讲使用jekyll serve来运行Jekyll，这和我们平常使用bundle exec jekyll serve的方式有点不一样。实际上在第十步里有解释<a href="https://jekyllrb.com/docs/step-by-step/10-deployment/#gemfile">怎么一回事</a>。我也不是很熟悉Ruby，使用Jekyll的很多人估计也是这样。反正Bundler大概是一个处理相同Gem的不同版本被同时引用的工具，我们记得用它就行了。</p>
<p>另外，这一篇虽然标题是Windows10，并不是说不适用于之前的Windows版本，我只是没有试过。</p>                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="/how_do_you_manage_memory.html" rel="bookmark"
                           title="Permalink to “你是如果管理内存的？”">“你是如果管理内存的？”</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-07-22T04:46:07+08:00">
                Published: 周五 22 七月 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/funcman.html">funcman</a>
        </address>
<p>In <a href="/category/programming.html">programming</a>.</p>
<p>tags: <a href="/tag/mian-shi.html">面试</a> <a href="/tag/nei-cun-guan-li.html">内存管理</a> <a href="/tag/nei-cun-chi.html">内存池</a> </p>
</footer><!-- /.post-info -->                <p>还没找到工作，面了几家，都没下文。我脸皮厚，写点总结发博客。</p>
<p>像标题这样的面试问题，这些天遇到不止一两次。第一次我略懵，毕竟好久没被面了，没什么准备，所以没做出全面的回答。不过，就算到现在，我也没能在面试时把这个问题回答得很到位。可能这个问题对我来说已经不是什么困扰，平时想得也不多，遇到了我也能解决。这里做一下笔记，这样再遇到这个问题，我可以表现得好一些。</p>
<p>首先破题，为什么需要考虑管理内存的事，因为C/C++主要提供的是一种很原始的手工释放内存的方式。人难免出错，如果申请了内存，最后忘记释放，就会造成内存泄漏。此外，对于那些在好几个模块之间共享的内存，怎样才能做到正确且合理地释放，也是个问题。如果其中某个模块做了解引用（dereference）操作，还要专门去通知别的模块，再根据情况的不同决定是否需要真的释放内存，那模块之间必然是紧耦合的。所以，并不是小心谨慎就能解决好内存管理问题，好的内存管理一定要借助合适的方法和工具。</p>
<p>我这里第一个要谈的工具，是内存池。内存池实际上是在一开始申请一大块内存，再将这大块的内存按照一定规则划分成几个尺寸的小块内存集合。同一尺寸的小块内存用一个叫FreeList的东西串起来，有几种尺寸就搞几条FreeList。当我们需要内存时，根据需要的尺寸 …</p>
                <a class="readmore" href="/how_do_you_manage_memory.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/just_do_it.html" rel="bookmark"
                           title="Permalink to ✔ JUST DO IT">✔ JUST DO IT</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-07-12T17:07:07+08:00">
                Published: 周二 12 七月 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/funcman.html">funcman</a>
        </address>
<p>In <a href="/category/gamedev.html">gamedev</a>.</p>
<p>tags: <a href="/tag/zhi-ye.html">职业</a> <a href="/tag/shi-ye.html">事业</a> <a href="/tag/gong-zuo.html">工作</a> </p>
</footer><!-- /.post-info -->                <p>最近辞职了，准备回游戏业，在找工作。</p>
<p>其实游戏业给我的，是一种失败感，尤其最近。比如斧子的惨状。再如手游审批这事，其实我对这块不感冒，但也有殃及池鱼的感觉。总结起来，就是一个没劲。主机解禁没带来多少改变，现在又闹这一出，一代又一代的人深陷魔掌无法脱出。</p>
<p>特佩服也特感谢一些没心没肺的观点——自己做好了不怕外界环境恶劣。这话是对的，比如放在斧子游戏机这事上，不是大家不挺你，是有些事你自己作死。能这么想的人，都是内心坚毅的人。而且，作为弱者，不干了这碗鸡汤，还能怎样。</p>
<p>以前老大批评我想太多，我很认同。业内如何，轮不上我这样的去想，想了也没用。我是程序员，不专注在自己手艺上是不行的。你看老罗，虽然手机做得还行，至少做出来了，但是总给人一种只会耍嘴炮的感觉，间接也耽误了锤子的行情。所以呢，我还是只专注于技术，不然哪一天风云幻变，做出中国巫师、中国神海的人里就没有我了（笑）。</p>
<p>十岁想做游戏，二十岁在做游戏，三十岁再回来。觉得对的事，就去做吧 …</p>
                <a class="readmore" href="/just_do_it.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/how_to_use_ch34x_usb_to_serial_adapter_on_osx_el_capitan.html" rel="bookmark"
                           title="Permalink to 如何在OSX El Capitan下使用基于CH34x芯片的USB串口适配线">如何在OSX El Capitan下使用基于CH34x芯片的USB串口适配线</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-12-10T07:47:23+08:00">
                Published: 周四 10 十二月 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/funcman.html">funcman</a>
        </address>
<p>In <a href="/category/programming.html">programming</a>.</p>
<p>tags: <a href="/tag/osx-el-capitan.html">OSX El Capitan</a> <a href="/tag/ch34x.html">CH34x</a> <a href="/tag/chuan-kou.html">串口</a> </p>
</footer><!-- /.post-info -->                <p>淘宝上有很多廉价的USB转串口的适配线，这其中不少使用的是南京的沁恒公司的CH34x芯片。</p>
<p>我们可以在“关于本机”-“系统报告”-“硬件”-“USB”里查看适配线的VID（厂商ID），来确定适配线是否基于CH34x芯片。CH34x的VID是0x1a86，我这根的PID（产品ID）是0x7523，你的PID可能不同，0x5523也是一个可用的PID。</p>
<p>确定芯片后，就可以去找驱动程序了。沁恒的网址是<a href="http://www.wch.cn">http://www.wch.cn</a>，我们可以从上面找到我们需要的驱动。<a href="http://www.wch.cn/download/CH341SER_MAC_ZIP.html">Mac的驱动也是有的</a>，不过太老了，未经签名，所以通过不了苹果在OSX 10.11上加入的SIP<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup>保护技术。如果直接安装这个驱动，肯定是用不了的。必须屏蔽SIP对kext<sup id="fnref:2"><a class="footnote-ref" href="#fn:2">2</a></sup>的保护。</p>
<p>设置SIP，我们需要用到csrutil，它就是SIP的配置修改工具。使用csrutil，必须进入恢复模式。恢复模式的进入方法是：开机（重启）时，同时按CMD键和R键。进入恢复模式之后，在“实用工具 …</p>
                <a class="readmore" href="/how_to_use_ch34x_usb_to_serial_adapter_on_osx_el_capitan.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/how_to_remember_english_words.html" rel="bookmark"
                           title="Permalink to 如何背单词">如何背单词</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-11-25T06:44:07+08:00">
                Published: 周三 25 十一月 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/funcman.html">funcman</a>
        </address>
<p>In <a href="/category/others.html">others</a>.</p>
<p>tags: <a href="/tag/ying-yu.html">英语</a> <a href="/tag/bei-dan-ci.html">背单词</a> </p>
</footer><!-- /.post-info -->                <p>我是个英语很烂的人，所有关于英语的能力，都来自于技术工作中对英文的不得不进行的接触。因为英语太烂，也失去了一些不错的机会。怎么学英语，我是不懂的。至于背单词，大多数英语好的人，应该都去尝试过。我也尝试过，但一直不得其法。</p>
<p>现在，为了完成学业，我又准备拿起单词书，再次尝试一下。在开始做这件事时，我想了一下，到底是什么阻碍了我之前在背单词上的持续努力？</p>
<p>我不是没有目的的去学习一个东西，相反，学好了英语对我来说有很多积极的意义。在我内心里，是有学习的冲动的。所以，之前的不顺利，应该是方法上出了问题。</p>
<p>背单词是一种记忆活动，在记忆领域，人们有一个普遍的共识，就是人脑记忆新事物遵循着“艾宾浩斯记忆曲线”。我之前也采用了遵循这种规律的记忆复习方法，相信在这类方法的应用上，没有什么问题。</p>
<p>在还没有想清楚这个问题的时候，我还在找背单词的工具。幸运的是我找到了一个叫<a href="https://itunes.apple.com/app/id888483369/">墨墨背单词</a>的手机应用，帮助我弄清了这个问题。</p>
<p>人有一种既贪婪又懦弱的通性。人做一件事情，是由欲望驱使的，欲望总是使人在得到的同时还想得到更多。人的能力有限，无法驾驭所有，当欲望发展成贪婪，无法得到完全的满足时，人的懦弱的本性就开始产生作用 …</p>
                <a class="readmore" href="/how_to_remember_english_words.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/how_to_save_data_to_apple_health_correctly.html" rel="bookmark"
                           title="Permalink to 如何正确编写苹果健康程序">如何正确编写苹果健康程序</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-10-27T10:45:00+08:00">
                Published: 周二 27 十月 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/funcman.html">funcman</a>
        </address>
<p>In <a href="/category/programming.html">programming</a>.</p>
<p>tags: <a href="/tag/ping-guo-jian-kang.html">苹果健康</a> <a href="/tag/healthkit.html">HealthKit</a> </p>
</footer><!-- /.post-info -->                <p>苹果健康使用HealthKit接收数据的提交和读取，很多时候，我们从程序编写的角度，把两者看做同一个东西，下文简称HK。</p>
<p>HK在权限管理方面，有个很特（guai）别（yi）的地方，也是一个坑，即：读权限和写权限是完全分离的，存在可写但不可读的情况。由于权限控制权完全在用户手中，即使程序同时请求读写权限，也可能只是获得到写权限，而无读权限。这就造成一个问题：程序无法直接知道HK里已经存有哪些数据，如果不想办法规避这个坑，同一条数据有可能被重复写入HK。</p>
<p>为了避免重复写入数据，我们需要在APP端甚至云端的数据存储中，对每条需要同步到HK的数据，进行标记。这样，才能将HK的数据同步做到最佳。</p>
<p>我个人对HK本身的设计有个想法：HK应该自动把同一个数据源提交来的相同数据进行合并。如果几个数据，它们的起止时间，数值等，都是相同的，把它们看做同一个数据，是完全合理的。其实HK对于重复数据，是有一个融合算法的，并不会把数据进行累加。但是，用户点开“显示所有数据”时，看到有数据重复的情况，多多少少心里会有些膈应，会怪罪APP端。苹果对HK的数据隐私，看得格外重要，才设计出如此怪异的权限机制 …</p>
                <a class="readmore" href="/how_to_save_data_to_apple_health_correctly.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/talk_about_my_next_interests_in_game_technologys.html" rel="bookmark"
                           title="Permalink to 谈一谈个人在接下来几年的游戏技术方向">谈一谈个人在接下来几年的游戏技术方向</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-01-08T14:46:00+08:00">
                Published: 周四 08 一月 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/funcman.html">funcman</a>
        </address>
<p>In <a href="/category/gamedev.html">gamedev</a>.</p>
<p>tags: <a href="/tag/ji-zhu-xuan-xing.html">技术选型</a> </p>
</footer><!-- /.post-info -->                <p>我对目前火爆的手游和之前火爆的端游、页游通通不感兴趣。除非项目非常nice，或者团队的人非常有趣，否则我不太会积极地回到游戏行业中。理想的状态是，我是一群酷爱游戏且专业的人的之一，做着一款看着就好玩的电视、电脑游戏。虽然Xbox ONE已经来中国了，PS4也要上市了，但是中国电视游戏的春天恐怕还要等上几年。所以，我考虑在这几年积攒一下技术。</p>
<p>所谓的积攒技术，就是做一个2D引擎，其实也就是造轮子。如果是即刻投身商业开发，那么造轮子，一定是件可耻的事情。Unity或者cocos2d-x已经足够好了。而这对于我来说，只是个人私事。理由不具体直接解释了，反正我就是爱折腾。</p>
<p>我个人很喜欢Unity的快捷和强大，但也感到如果Unity和cocos2d-x一样开源，很多事会好办很多。而对于后者，我不太喜欢它的设计。cocos2d吸收了很多Cocoa的特点，但对于一个游戏引擎来说，有些地方还是简洁点好。</p>
<p>对于一个2D引擎来说，图形底层并不复杂，只要把Sprite做出来，这个引擎就能用来做游戏了。一个成熟的2D引擎，必不可少要有一套动画系统。以前的2D游戏多采用序列帧，现在基本上是实时演算的关键帧插值动画。动画编辑器的开发量是不小的，我考虑使用Flash作为动画编辑器，用JSFL做数据导出。Flash可做的事情非常多，比如还可以作为UI布局器使用，甚至粒子特效编辑器也省了。使用通用编辑器来取代内部编辑器，是节省成本的一个好方法 …</p>
                <a class="readmore" href="/talk_about_my_next_interests_in_game_technologys.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
                </ol><!-- /#posts-list -->
<p class="paginator">
    Page 1 / 2
        <a href="/author/funcman2.html">&raquo;</a>
        <a href="/author/funcman2.html">&#8649;</a>
</p>
                </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://funcman.me/">我的博客</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="mailto:hyq1986@gmail.com">E-Mail</a></li>
                            <li><a href="https://twitter.com/funcman">Twitter</a></li>
                            <li><a href="https://github.com/funcman">Github</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>